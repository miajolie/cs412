<!-- blog/show_all.html -->
{% extends 'blog/base.html' %}

{% block content %}
<h1>{{article.title}}</h1>
<!-- 
{{articles}} -->

<main class="grid-container">
    <!-- scriplet code for a for loop -->

        <article class="featured">
            <div>
                <h2>{{article.title}}</h2>
                <h3>by {{article.author}}</h3>
                <p>
                    {{article.text}}
                </p>
            </div>
            <h3>
            <a href="{% url 'update_article' article.pk %}">Update this article</a>
	        </h3>
            
            {% if article.image_file %}
                <img src="{{article.image_file.url}}" alt="hey!">
            {% else %}
                <h3> NO IMAGE</h3>
            {% endif %}
            <div>

                <h2>Comments</h2>
                <h3>
                    <a href="{% url 'create_comment' article.pk %}"> Create a Comment</a>
                </h3>
                <!-- Dsiplay the comments about this article-->
                <!-- {{article.get_all_comments}} -->
                {% for comment in article.get_all_comments %}
                    <div>
                        <strong> by {{comment.author}} at {{comment.published}}</strong>
                        <p>
                            {{comment.text}}
                            <br>
                            <a href="{% url 'delete_comment' comment.pk %}">Delete</a> <!-- NEW -->
                        </p>

                    </div>

                {% endfor%}

            </div>
            
        </article>

        
</main>



{%endblock%}